

### HTTP字段

Host: 指定服务器的域名; 

Content-Length: 表明本次回应的数据长度; 

Connection: 如果为Keep-Alive 则为长连接。

Content-Type: 服务器回应时，告诉客户端，本次数据是什么格式

### GET与POST

GET 请求的参数位置一般是写在 URL 中；GET 方法是安全、幂等、可被缓存的。

POST 的语义是根据请求负荷（报文body）对指定的资源做出处理，具体的处理方式视资源类型而不同。POST 不安全，不幂等，（大部分实现）不可缓存。

### HTTP 版本

* HTTP/1.1: 简单(header + body)、灵活和易于扩展、应用广泛和跨平台；采用长连接的方式

性能问题-队头堵塞：当顺序发送的请求序列中的一个请求因为某种原因被阻塞时，在后面排队的所有请求也一同被阻塞了，会招致客户端一直请求不到数据

* HTTP/2

头部压缩：`HPACK` 算法：在客户端和服务器同时维护一张头信息表，所有字段都会存入这个表，生成一个索引号，以后就不发送同样字段了，只发送索引号

二进制格式: 头信息帧（Headers Frame）和数据帧（Data Frame）,增加了数据传输的效率

并发传输: 针对不同的 HTTP 请求用独一无二的 Stream ID 来区分，接收端可以通过 Stream ID 有序组装成 HTTP 消息，不同 Stream 的帧是可以乱序发送的，因此可以并发不同的 Stream。**虽然解决了HTTP层的队头堵塞，但是还存在TCP层的队头堵塞**

服务器推送: 客户端在访问 HTML 时，服务器可以直接主动推送 CSS 文件，减少了消息传递的次数。

* HTTP/3: 基于 UDP 的 **QUIC 协议**

无队头阻塞: **当某个流发生丢包时，只会阻塞这个流，其他流不会受到影响，因此不存在队头阻塞问题**。

更快的建立连接: QUIC 内部包含了 TLS，它在自己的帧会携带 TLS 里的“记录”，再加上 QUIC 使用的是 TLS/1.3，因此仅需 1 个 RTT 就可以「同时」完成建立连接与密钥协商





### 返回码

* 1xx（信息性状态码）：表示接收的请求正在处理。

  \- 100（继续）：服务器已经接收到请求的头部，并且客户端应该继续发送请求的剩余部分。

  \- 101（切换协议）：服务器要求切换协议，例如从HTTP协议切换到WebSocket协议。

* 2xx（成功状态码）：表示请求已成功处理。

  \- 200（成功）：请求已成功处理，并返回所请求的数据。

  \- 201（已创建）：请求成功，并且服务器创建了一个新的资源。

  \- 204（无内容）：请求成功处理，但没有返回任何内容。

* 3xx（重定向状态码）：表示需要进一步操作才能完成请求。

  \- 301（永久重定向）：请求的资源已永久移动到新的URL。

  \- 302（临时重定向）：请求的资源暂时移动到新的URL。

  \- 304（未修改）：客户端发送了一个条件请求，服务器返回未修改的状态，表示客户端缓存的副本仍有效。

* 4xx（客户端错误状态码）：表示客户端发生了错误。

  \- 400（错误请求）：服务器无法理解客户端发送的请求。

  \- 401（未授权）：请求需要用户身份验证。

  \- 403（禁止）：服务器拒绝了客户端的请求。

  \- 404（未找到）：请求的资源不存在。

* 5xx（服务器错误状态码）：表示服务器发生了错误。

  \- 500（**服务器内部错误**）：服务器发生了未知的内部错误。

  \- 502（**错误网关**）：服务器作为网关或代理，从上游服务器接收到无效的响应。

  \- 503（**服务不可用**）：服务器暂时无法处理请求，通常是由于过载或维护。
  
  

#### 限流、熔断

* 限流-流量计数器，将超过闲置的流量拒绝掉
* 限流-滑动时间窗口：对流量控制也不够精细
* 漏桶：在客户端的请求发送到服务器之前，先用漏桶缓存起来，这个漏桶可以是一个长度固定的队列，这个队列中的熔断请求均匀的发送到服务端。
* 令牌桶：固定周期补充令牌，客户端在请求前先获取令牌





#### 正向代理与反向代理

* 正向代理：当用户想访问某一网址时，用户先访问代理服务器，然后由代理服务器向目标网址发送请求最终将数据返回代理服务器，最后代理服务器将数据返回给用户。

**正向代理它代理了客户端，相当于代理服务器去访问目标网址。**

* 反向代理：正向代理时用户知道自己访问的是代理服务器，而反向代理是无感知的，用户本质上是不知道自己访问的是代理服务器。

反向代理它代理了目标服务器，让客户感觉自己实际上是在和目标服务器本身进行交互









